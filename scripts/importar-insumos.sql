-- ===========================================
-- IMPORTAR INSUMOS COMPLETOS (140 registros)
-- Ejecutar en Supabase SQL Editor
-- Precios sin proveedor (asignar manual despu√©s)
-- ===========================================

-- PASO 0: Permitir proveedor_id NULL en precios
ALTER TABLE precios_insumo ALTER COLUMN proveedor_id DROP NOT NULL;

-- PASO 1: Insertar 140 insumos
INSERT INTO insumos (nombre, categoria, unidad_medida, cantidad_por_paquete, iva_porcentaje, merma_porcentaje, activo) VALUES
  ('Abadejo', 'Pescados_Mariscos', 'kg', 1, 21, 0, true),
  ('Aceite De Girasol', 'Almacen', 'lt', 5, 21, 0, true),
  ('Aceite De Oliva', 'Almacen', 'lt', 5, 21, 0, true),
  ('Aceto', 'Almacen', 'lt', 1, 21, 0, true),
  ('Aderezo Caesar', 'Salsas_Recetas', 'kg', 1, 0, 0, true),
  ('Agua', 'Bebidas', 'unidad', 12, 21, 0, true),
  ('Ajo', 'Verduras_Frutas', 'kg', 5, 0, 0, true),
  ('Alcaparras', 'Almacen', 'kg', 1, 21, 0, true),
  ('Alubias', 'Almacen', 'kg', 5, 21, 0, true),
  ('Apio', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Arroz Calasparra', 'Almacen', 'kg', 5, 21, 0, true),
  ('Arroz Carnaroli', 'Almacen', 'kg', 5, 21, 0, true),
  ('Arroz Gallo', 'Almacen', 'kg', 5, 21, 0, true),
  ('Arvejas', 'Almacen', 'kg', 1, 10.5, 0, true),
  ('Pollo Pata Muslo', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Atun en aceite', 'Almacen', 'kg', 1.8, 21, 0, true),
  ('Azucar', 'Almacen', 'kg', 1, 21, 0, true),
  ('Suprema', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Batata', 'Verduras_Frutas', 'unidad', 12, 0, 0, true),
  ('Berenjena', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Bondiola', 'Carnes', 'kg', 1, 0, 32, true),
  ('Carre de Cerdo', 'Carnes', 'kg', 1, 0, 0, true),
  ('Bolonesa', 'Salsas_Recetas', 'kg', 1, 0, 0, true),
  ('Chorizo', 'Carnes', 'kg', 1, 21, 0, true),
  ('Burratina', 'Lacteos_Fiambres', 'unidad', 2, 0, 0, true),
  ('Cafe', 'Bebidas', 'kg', 1, 21, 0, true),
  ('Calabaza', 'Verduras_Frutas', 'unidad', 13, 0, 0, true),
  ('Camambert', 'Lacteos_Fiambres', 'unidad', 12, 0, 0, true),
  ('Camaron', 'Pescados_Mariscos', 'kg', 1, 21, 30, true),
  ('Chorizo Colorado', 'Carnes', 'kg', 1, 21, 0, true),
  ('Bananinha', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Cebolla de Verdeo', 'Verduras_Frutas', 'unidad', 1, 0, 20, true),
  ('Cebollon', 'Verduras_Frutas', 'kg', 16, 0, 20, true),
  ('Champinon', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Cherry', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Corazon de Cuadril', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Chipirones', 'Pescados_Mariscos', 'kg', 1, 0, 10, true),
  ('Lomo', 'Carnes', 'kg', 1, 10.5, 10, true),
  ('Ojo de Bife 2', 'Carnes', 'kg', 1, 10.5, 20, true),
  ('Bife De Chorizo 2', 'Carnes', 'kg', 1, 10.5, 10, true),
  ('Cornalitos', 'Pescados_Mariscos', 'kg', 1, 21, 0, true),
  ('Asado a 10 Cost.', 'Carnes', 'kg', 1, 10.5, 10, true),
  ('Crema De Leche', 'Lacteos_Fiambres', 'lt', 5, 21, 0, true),
  ('Bife De Chorizo', 'Carnes', 'kg', 1, 10.5, 10, true),
  ('Empanadas', 'Salsas_Recetas', 'unidad', 1, 0, 0, true),
  ('Espinaca', 'Verduras_Frutas', 'unidad', 5, 0, 70, true),
  ('Espinaca A La Crema', 'Salsas_Recetas', 'kg', 1, 0, 0, true),
  ('Fiambre c. paleta de cerdo', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Fondo oscuro', 'Salsas_Recetas', 'kg', 1, 0, 0, true),
  ('Barbacoa', 'Almacen', 'unidad', 3, 21, 0, true),
  ('Chocolate Aguila', 'Almacen', 'kg', 5, 21, 0, true),
  ('Gaseosa', 'Bebidas', 'unidad', 24, 21, 0, true),
  ('Dulce de leche', 'Almacen', 'kg', 10, 21, 0, true),
  ('Hongo De Pino', 'Verduras_Frutas', 'kg', 1, 21, 0, true),
  ('Huevo', 'Verduras_Frutas', 'unidad', 360, 21, 0, true),
  ('Jamon Cocido', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Jamon Crudo', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Jamon Crudo espanol', 'Lacteos_Fiambres', 'kg', 1, 0, 12, true),
  ('Jugo', 'Bebidas', 'unidad', 8, 21, 0, true),
  ('Kanikama', 'Pescados_Mariscos', 'kg', 1, 21, 0, true),
  ('Langostino Cola No.1', 'Pescados_Mariscos', 'kg', 1, 21, 32, true),
  ('Lang. Desvenados', 'Pescados_Mariscos', 'kg', 1, 21, 0, true),
  ('Frutos Rojos Congelados', 'Almacen', 'kg', 1, 10.5, 0, true),
  ('Harina 0000', 'Almacen', 'kg', 25, 10.5, 0, true),
  ('Lechuga', 'Verduras_Frutas', 'kg', 5, 0, 0, true),
  ('Lenguado', 'Pescados_Mariscos', 'kg', 1, 21, 5, true),
  ('Limon', 'Verduras_Frutas', 'kg', 16, 0, 0, true),
  ('Ketchup', 'Almacen', 'kg', 2.9, 21, 0, true),
  ('Bola de lomo', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Laurel', 'Almacen', 'kg', 1, 21, 0, true),
  ('Leche Entera', 'Almacen', 'lt', 1, 21, 0, true),
  ('Manteca', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Linguini', 'Almacen', 'kg', 1, 21, 0, true),
  ('Maiz Pisado', 'Almacen', 'kg', 5, 21, 0, true),
  ('Mejillon Pelado', 'Pescados_Mariscos', 'kg', 1, 21, 0, true),
  ('Mejillones Frescos', 'Pescados_Mariscos', 'kg', 1, 0, 10, true),
  ('Merluzon', 'Pescados_Mariscos', 'kg', 1, 21, 15, true),
  ('Mermelada de Morron', 'Salsas_Recetas', 'kg', 1, 0, 0, true),
  ('Maizena', 'Almacen', 'kg', 2, 21, 0, true),
  ('Carne Picada', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Molleja', 'Carnes', 'kg', 1, 10.5, 20, true),
  ('Morron Rojo', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Morron Verde', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Mortadela', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Masa Filo', 'Almacen', 'kg', 1, 0, 5, true),
  ('Muzzarella', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Nalga Feteada', 'Carnes', 'kg', 1, 10.5, 5, true),
  ('Mayonesa', 'Almacen', 'kg', 2.9, 21, 0, true),
  ('Ojo de Bife', 'Carnes', 'kg', 1, 10.5, 5, true),
  ('Punta de Asado', 'Carnes', 'kg', 1, 10.5, 10, true),
  ('Miel', 'Almacen', 'kg', 5, 21, 0, true),
  ('Palta', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Mostaza', 'Almacen', 'kg', 3, 21, 0, true),
  ('Nueces Peladas', 'Almacen', 'kg', 1, 21, 0, true),
  ('Oregano', 'Almacen', 'kg', 1, 21, 0, true),
  ('Panceta', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Papa', 'Verduras_Frutas', 'kg', 18, 0, 30, true),
  ('Pasas De Uva', 'Verduras_Frutas', 'kg', 1, 21, 0, true),
  ('Roast Beef', 'Carnes', 'kg', 1, 10.5, 25, true),
  ('Pepinillo', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Pan Hamburguesa', 'Almacen', 'unidad', 8, 21, 0, true),
  ('Pan Lomito', 'Almacen', 'unidad', 1, 21, 0, true),
  ('Tapa Cuadril', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Pomodoro', 'Salsas_Recetas', 'lt', 1, 0, 0, true),
  ('Portobello', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Puerro', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Vacio', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Pure De Papa', 'Salsas_Recetas', 'porcion', 1, 0, 0, true),
  ('Queso Azul', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Queso Cheddar', 'Lacteos_Fiambres', 'kg', 3.5, 21, 0, true),
  ('Queso Danbo', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Queso La Paulina', 'Lacteos_Fiambres', 'kg', 4, 21, 0, true),
  ('Queso Reggianito', 'Lacteos_Fiambres', 'kg', 1, 21, 0, true),
  ('Pechito de cerdo', 'Carnes', 'kg', 1, 21, 0, true),
  ('Rucula', 'Verduras_Frutas', 'unidad', 1, 0, 0, true),
  ('Pan Rallado', 'Almacen', 'kg', 5, 21, 0, true),
  ('Salmon Filet', 'Pescados_Mariscos', 'kg', 1, 21, 5, true),
  ('Salsa de pimienta', 'Salsas_Recetas', 'porcion', 1, 0, 0, true),
  ('Pimenton', 'Almacen', 'kg', 1, 21, 0, true),
  ('Salsa Verdeo', 'Salsas_Recetas', 'kg', 1, 0, 0, true),
  ('Pimienta Negra', 'Almacen', 'kg', 1, 0, 0, true),
  ('Asado a 10 Banderita', 'Carnes', 'kg', 1, 10.5, 5, true),
  ('Cuerito', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Tentaculo De Calamar', 'Pescados_Mariscos', 'kg', 1, 21, 0, true),
  ('Tomate', 'Verduras_Frutas', 'kg', 1, 0, 0, true),
  ('Rebozador', 'Almacen', 'kg', 5, 21, 0, true),
  ('Trucha', 'Pescados_Mariscos', 'kg', 1, 21, 5, true),
  ('Tubo De Calamar', 'Pescados_Mariscos', 'kg', 1, 0, 15, true),
  ('Patas de Cerdo', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Vieira Media Valva', 'Pescados_Mariscos', 'kg', 1, 21, 0, true),
  ('Sal', 'Almacen', 'gr', 500, 10.5, 0, true),
  ('Vino', 'Bebidas', 'lt', 1, 21, 0, true),
  ('Whisky', 'Bebidas', 'lt', 1, 0, 0, true),
  ('Zanahoria', 'Verduras_Frutas', 'unidad', 10, 0, 0, true),
  ('Chinchulin', 'Carnes', 'kg', 1, 10.5, 0, true),
  ('Salsa de Soja', 'Almacen', 'lt', 5, 21, 0, true),
  ('Savora', 'Almacen', 'kg', 2.9, 21, 0, true),
  ('Tomate Triturado', 'Almacen', 'kg', 3, 21, 0, true),
  ('Vinagre De Alcohol', 'Almacen', 'lt', 5, 21, 0, true),
  ('Morcilla', 'Carnes', 'kg', 1, 10.5, 0, true);

-- PASO 2: Insertar precios SIN proveedor (proveedor_id = NULL)
-- precio_unitario = precio_paquete / cantidad_por_paquete
INSERT INTO precios_insumo (insumo_id, proveedor_id, precio, fecha, es_precio_actual)
SELECT i.id, NULL, v.precio_unitario, CURRENT_DATE, true
FROM (VALUES
  ('Abadejo', 8300.0 / 1),
  ('Aceite De Girasol', 18943.0 / 5),
  ('Aceite De Oliva', 46550.0 / 5),
  ('Aceto', 5600.0 / 1),
  ('Agua', 7500.0 / 12),
  ('Ajo', 47000.0 / 5),
  ('Alcaparras', 10852.0 / 1),
  ('Alubias', 15375.0 / 5),
  ('Apio', 1200.0 / 1),
  ('Arroz Calasparra', 6693.0 / 5),
  ('Arroz Carnaroli', 14750.0 / 5),
  ('Arroz Gallo', 6900.0 / 5),
  ('Arvejas', 5211.0 / 1),
  ('Pollo Pata Muslo', 3150.0 / 1),
  ('Atun en aceite', 16500.0 / 1.8),
  ('Azucar', 1205.0 / 1),
  ('Suprema', 9450.0 / 1),
  ('Batata', 11500.0 / 12),
  ('Berenjena', 2200.0 / 1),
  ('Bondiola', 8300.0 / 1),
  ('Carre de Cerdo', 6240.0 / 1),
  ('Chorizo', 7080.0 / 1),
  ('Burratina', 5710.0 / 2),
  ('Cafe', 60293.0 / 1),
  ('Calabaza', 11500.0 / 13),
  ('Camambert', 38648.0 / 12),
  ('Camaron', 13265.0 / 1),
  ('Chorizo Colorado', 7153.0 / 1),
  ('Bananinha', 8000.0 / 1),
  ('Cebolla de Verdeo', 2500.0 / 1),
  ('Cebollon', 7000.0 / 16),
  ('Champinon', 15500.0 / 1),
  ('Cherry', 9000.0 / 1),
  ('Corazon de Cuadril', 11041.0 / 1),
  ('Chipirones', 18500.0 / 1),
  ('Lomo', 20814.0 / 1),
  ('Ojo de Bife 2', 18100.0 / 1),
  ('Bife De Chorizo 2', 14480.0 / 1),
  ('Cornalitos', 1400.0 / 1),
  ('Asado a 10 Cost.', 15000.0 / 1),
  ('Crema De Leche', 39440.0 / 5),
  ('Bife De Chorizo', 20200.0 / 1),
  ('Espinaca', 900.0 / 5),
  ('Fiambre c. paleta de cerdo', 6120.0 / 1),
  ('Gaseosa', 16630.0 / 24),
  ('Hongo De Pino', 18839.0 / 1),
  ('Huevo', 69300.0 / 360),
  ('Jamon Cocido', 6070.0 / 1),
  ('Jamon Crudo', 25218.0 / 1),
  ('Jugo', 10861.0 / 8),
  ('Kanikama', 12150.0 / 1),
  ('Langostino Cola No.1', 12380.0 / 1),
  ('Lang. Desvenados', 15950.0 / 1),
  ('Frutos Rojos Congelados', 11538.0 / 1),
  ('Harina 0000', 19647.0 / 25),
  ('Lechuga', 7000.0 / 5),
  ('Lenguado', 12200.0 / 1),
  ('Limon', 17500.0 / 16),
  ('Ketchup', 10422.0 / 2.9),
  ('Bola de lomo', 12100.0 / 1),
  ('Leche Entera', 1165.0 / 1),
  ('Manteca', 12400.0 / 1),
  ('Linguini', 5000.0 / 1),
  ('Maiz Pisado', 13279.0 / 5),
  ('Mejillon Pelado', 5980.0 / 1),
  ('Merluzon', 7500.0 / 1),
  ('Maizena', 8480.0 / 2),
  ('Carne Picada', 11300.0 / 1),
  ('Molleja', 20500.0 / 1),
  ('Morron Rojo', 4500.0 / 1),
  ('Morron Verde', 3300.0 / 1),
  ('Muzzarella', 6790.0 / 1),
  ('Nalga Feteada', 16300.0 / 1),
  ('Mayonesa', 9418.0 / 2.9),
  ('Ojo de Bife', 27850.0 / 1),
  ('Punta de Asado', 10500.0 / 1),
  ('Miel', 17369.0 / 5),
  ('Palta', 990.0 / 1),
  ('Mostaza', 4655.0 / 3),
  ('Nueces Peladas', 16900.0 / 1),
  ('Oregano', 3881.0 / 1),
  ('Panceta', 13056.0 / 1),
  ('Papa', 13500.0 / 18),
  ('Pasas De Uva', 4365.0 / 1),
  ('Roast Beef', 11000.0 / 1),
  ('Pepinillo', 3300.0 / 1),
  ('Pan Hamburguesa', 12231.0 / 8),
  ('Pan Lomito', 670.0 / 1),
  ('Tapa Cuadril', 15900.0 / 1),
  ('Portobello', 15900.0 / 1),
  ('Puerro', 2500.0 / 1),
  ('Vacio', 17000.0 / 1),
  ('Queso Azul', 9210.0 / 1),
  ('Queso Cheddar', 22360.0 / 3.5),
  ('Queso Danbo', 6590.0 / 1),
  ('Queso La Paulina', 20000.0 / 4),
  ('Queso Reggianito', 13391.0 / 1),
  ('Pechito de cerdo', 7500.0 / 1),
  ('Rucula', 400.0 / 1),
  ('Pan Rallado', 9952.0 / 5),
  ('Salmon Filet', 17900.0 / 1),
  ('Pimenton', 5950.0 / 1),
  ('Pimienta Negra', 16125.0 / 1),
  ('Asado a 10 Banderita', 16150.0 / 1),
  ('Cuerito', 3122.0 / 1),
  ('Tomate', 3300.0 / 1),
  ('Trucha', 19655.0 / 1),
  ('Tubo De Calamar', 14500.0 / 1),
  ('Patas de Cerdo', 2950.0 / 1),
  ('Vieira Media Valva', 16620.0 / 1),
  ('Sal', 1075.0 / 500),
  ('Whisky', 27586.0 / 1),
  ('Zanahoria', 7000.0 / 10),
  ('Salsa de Soja', 6650.0 / 5),
  ('Savora', 7556.0 / 2.9),
  ('Tomate Triturado', 5335.0 / 3),
  ('Vinagre De Alcohol', 4292.0 / 5),
  ('Morcilla', 4552.0 / 1)
) AS v(insumo_nombre, precio_unitario)
JOIN insumos i ON i.nombre = v.insumo_nombre;

-- RESUMEN
DO $$
DECLARE
  total_insumos INTEGER;
  total_precios INTEGER;
BEGIN
  SELECT COUNT(*) INTO total_insumos FROM insumos WHERE activo = true;
  SELECT COUNT(*) INTO total_precios FROM precios_insumo WHERE es_precio_actual = true;

  RAISE NOTICE '=== RESUMEN IMPORTACION ===';
  RAISE NOTICE 'Total insumos: %', total_insumos;
  RAISE NOTICE 'Insumos con precio: %', total_precios;
  RAISE NOTICE 'Insumos sin precio: %', total_insumos - total_precios;
END $$;
